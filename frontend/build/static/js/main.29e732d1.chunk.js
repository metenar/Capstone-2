(this["webpackJsonpcapstone-2"]=this["webpackJsonpcapstone-2"]||[]).push([[0],{177:function(e,t,r){},192:function(e,t,r){},194:function(e,t,r){},212:function(e,t,r){},232:function(e,t,r){},233:function(e,t,r){},234:function(e,t,r){},238:function(e,t){},240:function(e,t){},254:function(e,t){},256:function(e,t){},284:function(e,t){},286:function(e,t){},287:function(e,t){},292:function(e,t){},294:function(e,t){},313:function(e,t){},325:function(e,t){},328:function(e,t){},345:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(64),c=r.n(s),o=(r(192),r(4)),i=r.n(o),u=r(8),l=r(12),d=r(13),j=r(16),h=(r(194),r(178)),b=r(179),p=r(180),m=r.n(p),f="https://git.heroku.com/metebookapi.git",x=function(){function e(){Object(h.a)(this,e)}return Object(b.a)(e,null,[{key:"request",value:function(){var t=Object(u.a)(i.a.mark((function t(r){var a,n,s,c,o,u,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:{},n=l.length>2&&void 0!==l[2]?l[2]:"get",console.debug("API Call:",r,a,n),s="".concat(f,"/").concat(r),c={Authorization:"Bearer ".concat(e.token)},o="get"===n?a:{},t.prev=6,t.next=9,m()({url:s,method:n,data:a,params:o,headers:c});case 9:return t.abrupt("return",t.sent.data);case 12:throw t.prev=12,t.t0=t.catch(6),console.error("API Error:",t.t0.response),u=t.t0.response.data.error.message,Array.isArray(u)?u:[u];case 17:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getBook",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("books/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.book);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addBook",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("books/add",t,"post");case 2:return r=e.sent,e.abrupt("return",r.book);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBooksByStatus",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("mybooks/status/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.myBooks);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addBookToMyBook",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("mybooks/add",t,"post");case 2:return r=e.sent,e.abrupt("return",r.myBooks);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMyBooks",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("mybooks");case 2:return t=e.sent,e.abrupt("return",t.myBook);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMyBooksById",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("mybooks/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.myBook);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateMyBook",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("mybooks/".concat(t),r,"patch");case 2:return a=e.sent,e.abrupt("return",a.MyBook);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteFromMybooks",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("mybooks/".concat(t),{},"delete");case 2:return r=e.sent,e.abrupt("return",r.deleted);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBooksFromApi",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("api/search/".concat(t,"/").concat(r));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBooksFromApiById",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("api/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/register",t,"post");case 2:return r=e.sent,e.abrupt("return",r.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/token",t,"post");case 2:return r=e.sent,e.abrupt("return",r.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),r,"patch");case 2:return a=e.sent,e.abrupt("return",a.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),O=n.a.createContext(),g=r(187),v=(r(23),r(212),r(346)),k=r(347),y=r(348),w=r(349),_=r(363),B=r(364),N=r(362),C=r(350),S=r(0),R=function(e){var t=e.book,r=e.userBooks,n=Object(a.useContext)(O).addBookToMyBooks,s=Object(a.useState)(!1),c=Object(l.a)(s,2),o=c[0],h=c[1],b=Object(a.useState)(!1),p=Object(l.a)(b,2),m=p[0],f=p[1],x=Object(j.g)(),g=!1;function R(e){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t,r),x.push("/mybooks");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.find((function(e){return e.book_id===t.id}))&&(g=!0);return Object(S.jsx)("section",{className:"BookCard",children:Object(S.jsxs)(v.a,{children:[Object(S.jsxs)(k.a,{children:[Object(S.jsxs)(d.b,{to:"books/".concat(t.id),children:[Object(S.jsxs)(y.a,{children:[t.volumeInfo.title,t.volumeInfo.imageLinks&&Object(S.jsx)("img",{style:{width:"100px"},src:t.volumeInfo.imageLinks.smallThumbnail,alt:t.volumeInfo.title,className:"float-left ml-5"})]}),t.volumeInfo.authors&&Object(S.jsx)("p",{children:Object(S.jsxs)("small",{children:["by ",t.volumeInfo.authors.map((function(e){return e}))]})})]}),Object(S.jsx)("p",{className:m?"BookCard-description-visible":"BookCard-description",children:Object(S.jsx)("small",{children:t.volumeInfo.description})}),Object(S.jsx)("button",{onClick:function(){return f(!m)},className:"read-button",children:m?"Read Less":"Read More..."})]}),Object(S.jsxs)(w.a,{children:[Object(S.jsxs)("span",{className:"float-left ml-5",children:["Categories: ",t.volumeInfo.categories?t.volumeInfo.categories:"Missing"]}),Object(S.jsxs)(_.a,{isOpen:o,toggle:function(){return h(!o)},className:g?"disabled float-right":"active float-right",disabled:g,children:[Object(S.jsx)(B.a,{caret:!0,color:g?"danger":"success",children:"Add Library"}),Object(S.jsxs)(N.a,{children:[Object(S.jsx)(C.a,{header:!0,children:"Status"}),Object(S.jsx)(C.a,{disabled:g,className:"WantToRead",onClick:function(){return R("Want to Read")},children:"Want to Read"}),Object(S.jsx)(C.a,{onClick:function(){return R("Finished")},className:"Finished",disabled:g,children:"Finished"}),Object(S.jsx)(C.a,{onClick:function(){return R("Reading")},className:"Reading",disabled:g,children:"Reading"})]})]})]})]})})},I=r(351),M=r(352),F=r(181),q=function(e){var t=e.search,r=Object(a.useState)(""),n=Object(l.a)(r,2),s=n[0],c=n[1];return Object(S.jsx)("div",{className:"mb-2",children:Object(S.jsxs)(I.a,{onSubmit:function(e){e.preventDefault(),t(s||void 0),c("")},className:"form-inline",children:[Object(S.jsx)(M.a,{className:"form-control  flex-grow-1",type:"text",name:"term",value:s,placeholder:"Enter search term..",onChange:function(e){c(e.target.value)}}),Object(S.jsx)(F.a,{type:"submit",color:"primary",children:"Submit"})]})})},A=(r(232),r(353)),L=r(354),T=r(355),U=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)(0),c=Object(l.a)(s,2),o=c[0],d=c[1],h=Object(a.useState)("war"),b=Object(l.a)(h,2),p=b[0],m=b[1],f=Object(a.useState)(0),v=Object(l.a)(f,2),k=v[0],y=v[1],w=Object(a.useContext)(O),_=w.currentUser,B=w.myBooks;function N(e){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(i.a.mark((function e(t){var r,a,s,c,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:0,e.next=3,x.getBooksFromApi(t,r);case 3:a=e.sent,s=a.res_Data,c=a.total,n(s),d(c),m(t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){N(p)}),[p]);return r?_?Object(S.jsxs)("div",{className:"col-md-8 offset-md-2",children:[Object(S.jsx)("h3",{children:"Books"}),Object(S.jsx)(q,{search:N}),r.map((function(e){return Object(S.jsx)(R,{book:e,userBooks:B},e.id)})),Object(S.jsx)("div",{className:"pagination",children:Object(S.jsxs)(A.a,{className:"pagination-item",size:"sm","aria-label":"Page navigation",children:[Object(S.jsx)(L.a,{disabled:k<=0,children:Object(S.jsx)(T.a,{onClick:function(){y(k-1),N(p,k)},previous:!0,href:"#"})}),Object(g.a)(Array(Math.ceil(o/20))).map((function(e,t){return 0===t||t===Math.ceil(o/20)-1||t>=k-2&&t<=k+2?Object(S.jsx)(L.a,{active:t===k,children:Object(S.jsx)(T.a,{onClick:function(e){return N(p,r=t),void y(r);var r},href:"#",children:t+1})},t):"."})),Object(S.jsx)(L.a,{disabled:k===Math.ceil(o/20)-1,children:Object(S.jsx)(T.a,{onClick:function(){y(k+1),N(p,k)},next:!0,href:"#"})})]})})]}):Object(S.jsx)(j.a,{to:"/login"}):Object(S.jsxs)("h3",{children:["Loading...",Object(S.jsx)("i",{className:"fas fa-4x fa-spinner fa-spin"})]})},E=function(){var e=Object(a.useContext)(O).currentUser;return Object(S.jsxs)("div",{className:"text-center",children:[Object(S.jsx)("h1",{children:"Book API"}),Object(S.jsx)("p",{children:" You can follow your library using easy steps."}),e?Object(S.jsxs)("div",{children:[Object(S.jsxs)("h3",{children:["Welcome Back, ",e.username]}),Object(S.jsx)("img",{className:"card-img rounded-circle user-img mt-2 ml-2 p-2",style:{width:"150px"},src:e.image,alt:"user avatar"}),Object(S.jsx)(U,{})]}):Object(S.jsxs)("p",{children:[Object(S.jsx)(d.b,{className:"btn btn-primary mr-3",to:"/login",children:"Login"}),Object(S.jsx)(d.b,{className:"btn btn-primary",to:"/signup",children:"SignUp"})]})]})},P=r(37),D=r(356),W=r(357),Z=function(e){var t={};return e.password?e.password.length<6&&(t.password="Must be at least 6 characters"):t.password="Required",e.first_name?e.first_name.length>15&&(t.first_name="Must be 15 characters or less"):t.first_name="Required",e.last_name?e.last_name.length>20&&(t.last_name="Must be 20 characters or less"):t.last_name="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},z=function(e){var t=e.save,r=Object(a.useContext)(O).currentUser,n=Object(P.a)({initialValues:{username:r.username,first_name:r.firstName,last_name:r.lastName,email:r.email,password:"",image:r.image},validate:Z,onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(a,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(r.username,a);case 3:e.sent.success&&s.setStatus({message:"Profile Updated"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.errors.password=e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()});return Object(S.jsxs)("div",{className:"col-md-4 m-auto",children:[Object(S.jsx)("h2",{children:"Profile"}),Object(S.jsx)(v.a,{className:"card",children:Object(S.jsx)(k.a,{children:Object(S.jsxs)(I.a,{onSubmit:n.handleSubmit,children:[Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"Username"}),Object(S.jsx)("p",{className:"font-weight-bold",children:n.values.username}),Object(S.jsx)("img",{className:"card-img rounded-circle user-img mt-2 ml-2 p-2",style:{width:"100px"},src:n.values.image,alt:"user avatar"})]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"First Name"}),Object(S.jsx)(M.a,{type:"text",name:"first_name",value:n.values.first_name,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.first_name&&n.errors.first_name?Object(S.jsx)("div",{className:"alert alert-danger",children:n.errors.first_name}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"Last Name"}),Object(S.jsx)(M.a,{type:"text",name:"last_name",value:n.values.last_name,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.last_name&&n.errors.last_name?Object(S.jsx)("div",{className:"alert alert-danger",children:n.errors.last_name}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"Email"}),Object(S.jsx)(M.a,{type:"email",name:"email",value:n.values.email,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.email&&n.errors.email?Object(S.jsx)("div",{className:"alert alert-danger",children:n.errors.email}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"Confirm password to make changes:"}),Object(S.jsx)(M.a,{type:"password",name:"password",value:n.values.password,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.password&&n.errors.password?Object(S.jsx)("div",{className:"alert alert-danger",children:n.errors.password}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"image",children:"Avatar image "}),Object(S.jsx)(M.a,{type:"text",id:"image",name:"image",value:n.values.image,placeholder:"Enter your image",onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.image&&n.errors.image?Object(S.jsx)("div",{className:"alert alert-danger",children:n.errors.image}):null]}),Object(S.jsx)("div",{className:"text-success",children:n.status&&n.status.message?n.status.message:""}),Object(S.jsx)(F.a,{type:"submit",color:"primary",children:"Save Changes"})]})})})]})},V=function(e){var t={};return e.username?e.username.length>15&&(t.username="Must be 15 characters or less"):t.username="Required",e.password?e.password.length<6&&(t.password="Must be at least 6 characters"):t.password="Required",t},J=function(e){var t=e.login,r=Object(j.g)(),a=Object(P.a)({initialValues:{username:"",password:""},validate:V,onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(n);case 3:e.sent.success&&r.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.errors.password=e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()});return Object(S.jsx)("section",{className:"col-md-4 m-auto",children:Object(S.jsxs)(I.a,{onSubmit:a.handleSubmit,children:[Object(S.jsx)("h2",{children:"Login"}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"username",children:"Username "}),Object(S.jsx)(M.a,{type:"text",id:"username",name:"username",value:a.values.username,placeholder:"Enter username",onChange:a.handleChange,onBlur:a.handleBlur}),a.touched.username&&a.errors.username?Object(S.jsx)("div",{className:"alert alert-danger",children:a.errors.username}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"password",children:"Password "}),Object(S.jsx)(M.a,{type:"password",id:"password",name:"password",value:a.values.password,placeholder:"Enter your password",onChange:a.handleChange,onBlur:a.handleBlur}),a.touched.password&&a.errors.password?Object(S.jsx)("div",{className:"alert alert-danger",children:a.errors.password}):null]}),Object(S.jsx)(F.a,{color:"primary",children:"Submit"})]})})},$=(r(233),r(361)),H=function(e){var t=e.book,r=Object(a.useState)(!1),n=Object(l.a)(r,2),s=n[0],c=n[1],o="";o="Reading"===t.current_status?"Reading":"Finished"===t.current_status?"Finished":"WantToRead";var i="",u=!1;"Finished"===t.current_status&&t.finished_date&&(u=!0,i=new Date(t.finished_date).toLocaleDateString());return Object(S.jsx)("section",{className:"MyBookCard",children:Object(S.jsxs)($.a,{children:[Object(S.jsxs)($.a.Body,{children:[Object(S.jsxs)(d.b,{to:"books/".concat(t.book_id),children:[Object(S.jsxs)($.a.Title,{children:[t.name,t.cover&&Object(S.jsx)("img",{style:{width:"100px"},src:t.cover,alt:t.name,className:"float-left ml-5"})]}),t.author&&Object(S.jsx)("p",{children:Object(S.jsxs)("small",{children:["by ",t.author]})}),t.rating&&Object(S.jsxs)("p",{children:["Rating: ",t.rating]}),"Reading"===t.current_status&&Object(S.jsxs)("p",{children:["Progress: %",t.progress]})]}),Object(S.jsx)("p",{className:s?"MyBookCard-description-visible":"MyBookCard-description",children:Object(S.jsx)("small",{children:t.description.replace(/(<(\/?)[a-zA-Z]+>)/g," ")})}),Object(S.jsx)("button",{onClick:function(){return c(!s)},className:"read-button",children:s?"Read Less":"Read More..."})]}),Object(S.jsxs)($.a.Footer,{className:o,children:[Object(S.jsx)(d.b,{to:"mybooks/".concat(t.current_status),children:t.current_status}),Object(S.jsxs)("span",{id:"categories",className:"float-left ml-1",children:["Categories: ",t.categories]}),u&&Object(S.jsxs)("p",{children:["Finished Date: ",i]})]})]})})},Y=function(){var e=Object(a.useContext)(O),t=e.currentUser,r=e.myBooks;return t?Object(S.jsxs)("div",{className:"col-md-8 offset-md-2",children:[Object(S.jsx)("h3",{children:"Books"}),r&&r.map((function(e){return Object(S.jsx)(H,{book:e},e.book_id)}))]}):Object(S.jsx)(j.a,{to:"/login"})},G=function(e){var t={};return e.username?e.username.length>15&&(t.username="Must be 15 characters or less"):t.username="Required",e.password?e.password.length<6&&(t.password="Must be at least 6 characters"):t.password="Required",e.first_name?e.first_name.length>15&&(t.first_name="Must be 15 characters or less"):t.first_name="Required",e.last_name?e.last_name.length>20&&(t.last_name="Must be 20 characters or less"):t.last_name="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},K=function(e){var t=e.signup,r=Object(j.g)(),a=Object(P.a)({initialValues:{username:"",first_name:"",last_name:"",email:"",password:"",image:""},validate:G,onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(n);case 3:e.sent.success&&r.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.errors.password=e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()});return Object(S.jsx)("section",{className:"col-md-4 m-auto",children:Object(S.jsxs)(I.a,{onSubmit:a.handleSubmit,children:[Object(S.jsx)("h2",{children:"SignUp"}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"username",children:"Username "}),Object(S.jsx)(M.a,{type:"text",id:"username",name:"username",value:a.values.username,placeholder:"Enter username",onChange:a.handleChange,onBlur:a.handleBlur}),a.touched.username&&a.errors.username?Object(S.jsx)("div",{className:"alert alert-danger",children:a.errors.username}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"password",children:"Password "}),Object(S.jsx)(M.a,{type:"password",id:"password",name:"password",value:a.values.password,placeholder:"Enter your password",onChange:a.handleChange,onBlur:a.handleBlur}),a.touched.password&&a.errors.password?Object(S.jsx)("div",{className:"alert alert-danger",children:a.errors.password}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"first_name",children:"First Name "}),Object(S.jsx)(M.a,{type:"text",id:"first_name",name:"first_name",value:a.values.first_name,placeholder:"Enter your First Name",onChange:a.handleChange,onBlur:a.handleBlur}),a.touched.first_name&&a.errors.first_name?Object(S.jsx)("div",{className:"alert alert-danger",children:a.errors.first_name}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"last_name",children:"Last Name "}),Object(S.jsx)(M.a,{type:"text",id:"last_name",name:"last_name",value:a.values.last_name,placeholder:"Enter your last Name",onChange:a.handleChange,onBlur:a.handleBlur}),a.touched.last_name&&a.errors.last_name?Object(S.jsx)("div",{className:"alert alert-danger",children:a.errors.last_name}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"email",children:"Email "}),Object(S.jsx)(M.a,{type:"email",id:"email",name:"email",value:a.values.email,placeholder:"Enter your email",onChange:a.handleChange,onBlur:a.handleBlur}),a.touched.email&&a.errors.email?Object(S.jsx)("div",{className:"alert alert-danger",children:a.errors.email}):null]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"image",children:"Avatar image "}),Object(S.jsx)(M.a,{type:"text",id:"image",name:"image",value:a.values.image,placeholder:"Enter your image",onChange:a.handleChange,onBlur:a.handleBlur}),a.touched.image&&a.errors.image?Object(S.jsx)("div",{className:"alert alert-danger",children:a.errors.image}):null]}),Object(S.jsx)(F.a,{type:"submit",color:"primary",children:"Submit"})]})})},Q=(r(234),r(358)),X=r(359),ee=r(360);var te=function(e){var t=e.logout,r=Object(a.useContext)(O).currentUser;return r?Object(S.jsx)("div",{children:Object(S.jsxs)(Q.a,{expand:"md",children:[Object(S.jsx)(d.c,{exact:!0,to:"/",className:"navbar-brand",children:"Books API"}),Object(S.jsxs)(X.a,{className:"ml-auto",navbar:!0,children:[Object(S.jsx)(ee.a,{children:Object(S.jsx)(d.c,{to:"/mybooks",children:"My Books"})}),Object(S.jsx)(ee.a,{children:Object(S.jsx)(d.c,{to:"/profile",children:"Profile"})}),Object(S.jsx)(ee.a,{children:Object(S.jsxs)(d.b,{to:"/",onClick:t,children:["Logout ",Object(S.jsx)("img",{className:"card-img rounded-circle user-img mt-2 ml-2 p-2",style:{width:"50px"},src:r.image,alt:"user avatar"}),r.username]})})]})]})}):Object(S.jsx)("div",{children:Object(S.jsx)(Q.a,{expand:"md",children:Object(S.jsx)(d.c,{exact:!0,to:"/",className:"navbar-brand",children:"Book API"})})})},re=r(186),ae=r.n(re),ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=Object(a.useState)((function(){return window.localStorage.getItem(e)||t})),n=Object(l.a)(r,2),s=n[0],c=n[1];return Object(a.useEffect)((function(){window.localStorage.setItem(e,s)}),[e,s]),[s,c]},se=(r(177),function(e){var t=e.book,r=e.status,n=e.remove,s=Object(a.useState)(!1),c=Object(l.a)(s,2),o=c[0],h=c[1],b=Object(j.g)(),p="",m="",f=!1;function x(){return(x=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:b.push("/mybooks");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"Finished"===(p="Reading"===r?"Reading":"Finished"===r?"Finished":"Want To Read")&&t.finished_date&&(f=!0,m=new Date(t.finished_date).toLocaleDateString());return Object(S.jsx)("section",{className:"BookCard",children:Object(S.jsxs)($.a,{children:[Object(S.jsxs)($.a.Body,{children:[Object(S.jsxs)(d.b,{to:"/books/".concat(t.book_id),children:[Object(S.jsxs)($.a.Title,{children:[t.name,t.cover&&Object(S.jsx)("img",{style:{width:"100px"},src:t.cover,alt:t.name,className:"float-left ml-5"})]}),t.author&&Object(S.jsx)("p",{children:Object(S.jsxs)("small",{children:["by ",t.author]})}),t.rating&&Object(S.jsxs)("p",{children:["Rating: ",t.rating]}),"Reading"===p&&Object(S.jsxs)("p",{children:["Progress: ",t.progress]})]}),Object(S.jsx)("p",{className:o?"BookCard-description-visible":"BookCard-description",children:Object(S.jsx)("small",{children:t.description.replace(/(<(\/?)[a-zA-Z]+>)/g," ")})}),Object(S.jsx)("button",{onClick:function(){return t.book_id,h(!o)},className:"read-button",children:o?"Read Less":"Read More..."})]}),Object(S.jsxs)($.a.Footer,{className:"Want To Read"===p?"WantToRead":p,children:[p,f&&Object(S.jsxs)("p",{children:["Finished Date: ",m]}),Object(S.jsxs)("span",{id:"categories",className:"float-left ml-5",children:["Categories: ",t.categories]}),Object(S.jsx)(d.b,{to:"update/".concat(t.book_id),className:"btn btn-primary float-right update",children:"Update Status"}),Object(S.jsx)("button",{onClick:function(){return function(e){return x.apply(this,arguments)}(t.book_id)},className:"btn btn-danger float-right",children:"Delete"})]})]})})}),ce=function(e){var t=e.remove,r=Object(j.h)().status,n="";n="Finished"===r?"finished":"Reading"===r?"reading":"wanttoread";var s=Object(a.useState)([]),c=Object(l.a)(s,2),o=c[0],d=c[1],h=Object(a.useContext)(O).currentUser;function b(){return(b=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getBooksByStatus(t);case 2:r=e.sent,d(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(e){b.apply(this,arguments)}(n)}),[n]),o?h?Object(S.jsxs)("div",{className:"col-md-8 offset-md-2",children:[Object(S.jsxs)("h3",{children:[r," Books"]}),o.map((function(e){return Object(S.jsx)(se,{book:e,remove:t,status:r},e.book_id)}))]}):Object(S.jsx)(j.a,{to:"/login"}):Object(S.jsxs)("h3",{children:["Loading...",Object(S.jsx)("i",{className:"fas fa-4x fa-spinner fa-spin"})]})},oe=function(e){var t=e.book,r=e.userBooks,n=Object(a.useState)(!1),s=Object(l.a)(n,2),c=s[0],o=s[1],d=Object(a.useContext)(O).addBookToMyBooks,h=Object(a.useState)(!1),b=Object(l.a)(h,2),p=b[0],m=b[1],f=Object(j.g)(),x=new Date(t.published_date).toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"}),g=!1;function v(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t,r),f.push("/mybooks");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.find((function(e){return e.book_id===t.id}))&&(g=!0);return Object(S.jsx)("section",{className:"BookCard",children:Object(S.jsxs)($.a,{children:[Object(S.jsxs)($.a.Body,{children:[t.cover&&Object(S.jsx)("img",{style:{width:"100px"},src:t.cover,alt:t.name,className:"card-img ml-1"}),Object(S.jsx)($.a.Title,{children:t.name}),t.author&&Object(S.jsx)("p",{children:Object(S.jsxs)("small",{children:["by ",t.author]})}),t.rating&&Object(S.jsxs)("p",{children:["Rating: ",t.rating]}),Object(S.jsx)("p",{className:c?"BookCard-description-visible":"BookCard-description",children:Object(S.jsx)("small",{children:t.description.replace(/(<(\/?)[a-zA-Z]+>)/g," ")})}),Object(S.jsx)("button",{onClick:function(){return o(!c)},className:"read-button",children:c?"Read Less":"Read More..."}),Object(S.jsxs)("p",{children:["Publisher: ",t.publisher,",  Published Date: ",x]}),Object(S.jsxs)("p",{children:["Total Page: ",t.page_count]})]}),Object(S.jsxs)($.a.Footer,{children:[Object(S.jsxs)("span",{id:"categories",className:"float-left ml-5",children:["Categories: ",t.categories]}),Object(S.jsxs)(_.a,{isOpen:p,toggle:function(){return m(!p)},className:g?"disabled float-right":"active float-right",disabled:g,children:[Object(S.jsx)(B.a,{caret:!0,color:g?"danger":"success",children:"Add Library"}),Object(S.jsxs)(N.a,{children:[Object(S.jsx)(C.a,{header:!0,children:"Status"}),Object(S.jsx)(C.a,{className:"WantToRead",onClick:function(){return v("Want to Read")},children:"Want to Read"}),Object(S.jsx)(C.a,{onClick:function(){return v("Finished")},className:"Finished",children:"Finished"}),Object(S.jsx)(C.a,{onClick:function(){return v("Reading")},className:"Reading",children:"Reading"})]})]})]})]})})},ie=function(){var e=Object(j.h)().id,t=Object(a.useState)(null),r=Object(l.a)(t,2),n=r[0],s=r[1],c=Object(a.useContext)(O),o=c.currentUser,d=c.myBooks;return Object(a.useEffect)((function(){function t(){return(t=Object(u.a)(i.a.mark((function t(){var r,a,n,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getBook(e);case 3:r=t.sent,s(r),t.next=20;break;case 7:if(t.prev=7,t.t0=t.catch(0),!t.t0){t.next=20;break}return t.next=12,x.getBooksFromApiById(e);case 12:return a=t.sent,n={id:a.id,name:a.volumeInfo.title,cover:a.volumeInfo.imageLinks.smallThumbnail,author:a.volumeInfo.authors.toString(),page_count:a.volumeInfo.pageCount,publisher:a.volumeInfo.publisher,published_date:a.volumeInfo.publishedDate,description:a.volumeInfo.description,categories:a.volumeInfo.categories?a.volumeInfo.categories.toString():"Missing"},t.next=16,x.addBook(n);case 16:return t.next=18,x.getBook(e);case 18:c=t.sent,s(c);case 20:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),n?o?Object(S.jsxs)("div",{className:"col-md-8 offset-md-2",children:[Object(S.jsx)("h3",{children:"Book details"}),Object(S.jsx)(oe,{book:n,userBooks:d})]}):Object(S.jsx)(j.a,{to:"/login"}):Object(S.jsxs)("h3",{children:["Loading...",Object(S.jsx)("i",{className:"fas fa-4x fa-spinner fa-spin"})]})},ue=function(e){var t={};return e.current_status||(t.current_status="Required"),t},le=function(e){var t=e.update;console.log("Mete");var r=Object(j.h)().book_id;console.log(r);var n=Object(a.useContext)(O),s=n.currentUser,c=n.myBooks.find((function(e){return e.book_id===r})),o={};"Finished"===c.current_status?(o.username=s.username,o.book_id=c.book_id,o.current_status=c.current_status,o.rating=c.rating,o.finished_date=c.finished_date):"Reading"===c.current_status?(o.username=s.username,o.book_id=c.book_id,o.current_status=c.current_status,o.progress=c.progress):(o.username=s.username,o.book_id=c.book_id,o.current_status=c.current_status);var l=Object(P.a)({initialValues:o,validate:ue,onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(r.book_id,r);case 3:e.sent.success&&a.setStatus({message:"Book Status Updated"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l.errors.password=e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()});return Object(S.jsxs)("div",{className:"col-md-4 m-auto",children:[Object(S.jsx)("h2",{children:"Book Status"}),Object(S.jsx)(v.a,{className:"card",children:Object(S.jsx)(k.a,{children:Object(S.jsxs)(I.a,{onSubmit:l.handleSubmit,children:[Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"Username"}),Object(S.jsx)("p",{className:"font-weight-bold",children:l.values.username})]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"book_id"}),Object(S.jsx)("p",{children:l.values.book_id})]}),Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"Current Status"}),Object(S.jsx)(M.a,{type:"text",name:"current_status",value:l.values.current_status,onChange:l.handleChange,onBlur:l.handleBlur}),l.touched.current_status&&l.errors.current_status?Object(S.jsx)("div",{className:"alert alert-danger",children:l.errors.current_status}):null]}),"Finished"===l.values.current_status&&Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"Rating"}),Object(S.jsx)(M.a,{type:"text",name:"rating",value:l.values.rating,onChange:l.handleChange,onBlur:l.handleBlur}),l.touched.rating&&l.errors.rating?Object(S.jsx)("div",{className:"alert alert-danger",children:l.errors.rating}):null]}),"Finished"===l.values.current_status&&Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{children:"Finished Date"}),Object(S.jsx)(M.a,{type:"text",name:"finished_date",value:l.values.finished_date,onChange:l.handleChange,onBlur:l.handleBlur}),l.touched.finished_date&&l.errors.finished_date?Object(S.jsx)("div",{className:"alert alert-danger",children:l.errors.finished_date}):null]}),"Finished"!==l.values.current_status&&"Want to Read"!==l.values.current_status&&Object(S.jsxs)(D.a,{children:[Object(S.jsx)(W.a,{for:"progress",children:"Progress "}),Object(S.jsx)(M.a,{type:"text",id:"progress",name:"progress",value:l.values.progress,placeholder:"Enter total page count read",onChange:l.handleChange,onBlur:l.handleBlur}),l.touched.progress&&l.errors.progress?Object(S.jsx)("div",{className:"alert alert-danger",children:l.errors.progress}):null]}),Object(S.jsx)("div",{className:"text-success",children:l.status&&l.status.message?l.status.message:""}),Object(S.jsx)(F.a,{type:"submit",color:"primary",children:"Save Changes"})]})})})]})};var de=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)(!1),c=Object(l.a)(s,2),o=c[0],h=c[1],b=Object(a.useState)(null),p=Object(l.a)(b,2),m=p[0],f=p[1],g=ne("token"),v=Object(l.a)(g,2),k=v[0],y=v[1];function w(){return(w=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.signup(t);case 3:return r=e.sent,y(r),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("failed",e.t0),e.abrupt("return",{success:!1});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function _(){return(_=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.login(t);case 3:return r=e.sent,y(r),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("failed",e.t0),e.abrupt("return",{success:!1});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function B(){return(B=Object(u.a)(i.a.mark((function e(t,r){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={first_name:r.first_name,last_name:r.lastName,email:r.email,image:r.image},e.prev=1,e.next=4,x.update(t,a);case 4:return s=e.sent,n(s),e.abrupt("return",{success:!0});case 9:return e.prev=9,e.t0=e.catch(1),console.error("failed",e.t0),e.abrupt("return",{success:!1});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function N(){return(N=Object(u.a)(i.a.mark((function e(t,a){var n,s,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getBook(t.id);case 3:return n=e.sent,s={username:r.username,book_id:n.id,current_status:a},e.next=7,x.addBookToMyBook(s);case 7:return R(),e.abrupt("return",{success:!0});case 11:if(e.prev=11,e.t0=e.catch(0),console.error("failed",e.t0),!e.t0){e.next=24;break}return c={id:t.id,name:t.volumeInfo.title,cover:t.volumeInfo.imageLinks.smallThumbnail,author:t.volumeInfo.authors.toString(),page_count:t.volumeInfo.pageCount,publisher:t.volumeInfo.publisher,published_date:t.volumeInfo.publishedDate,description:t.volumeInfo.description,categories:t.volumeInfo.categories?t.volumeInfo.categories.toString():"Missing"},o={username:r.username,book_id:t.id,current_status:a,rating:t.volumeInfo.avarageRating?t.volumeInfo.averageRating.toString():"0"},e.next=19,x.addBook(c);case 19:return e.next=21,x.addBookToMyBook(o);case 21:return R(),console.error("failed",e.t0),e.abrupt("return",{success:!1});case 24:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function C(){return(C=Object(u.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,delete r.username,e.next=4,x.getBook(r.book_id);case 4:return a=e.sent,"Finished"!==r.current_status?(r.progress=(+r.progress/a.page_count*100).toFixed(2),r.progress=+r.progress):r.progress=100,e.next=8,x.updateMyBook(t,r);case 8:return R(),e.abrupt("return",{success:!0});case 12:return e.prev=12,e.t0=e.catch(0),console.error("failed",e.t0),e.abrupt("return",{success:!1});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function R(){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getMyBooks(r.username);case 2:t=e.sent,f(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.deleteFromMybooks(t);case 3:return R(),e.abrupt("return",{success:!0});case 7:return e.prev=7,e.t0=e.catch(0),console.error("failed",e.t0),e.abrupt("return",{success:!1});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(i.a.mark((function e(){var t,r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=18;break}return e.prev=1,t=ae.a.decode(k),r=t.username,x.token=k,e.next=6,x.getCurrentUser(r);case 6:return a=e.sent,e.next=9,x.getMyBooks(r);case 9:s=e.sent,f(s),n(a),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("error loading",e.t0),n(null);case 18:h(!0);case 19:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}h(!1),function(){e.apply(this,arguments)}()}),[k]),o?Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(d.a,{children:Object(S.jsxs)(O.Provider,{value:{currentUser:r,myBooks:m,addBookToMyBooks:function(e,t){return N.apply(this,arguments)}},children:[Object(S.jsx)(te,{logout:function(){n(null),y(null)}}),Object(S.jsx)("main",{children:Object(S.jsxs)(j.d,{children:[Object(S.jsx)(j.b,{exact:!0,path:"/",children:Object(S.jsx)(E,{})}),Object(S.jsx)(j.b,{exact:!0,path:"/signup",children:Object(S.jsx)(K,{signup:function(e){return w.apply(this,arguments)}})}),Object(S.jsx)(j.b,{exact:!0,path:"/login",children:Object(S.jsx)(J,{login:function(e){return _.apply(this,arguments)}})}),Object(S.jsx)(j.b,{exact:!0,path:"/profile",children:Object(S.jsx)(z,{save:function(e,t){return B.apply(this,arguments)}})}),Object(S.jsx)(j.b,{exact:!0,path:"/mybooks",children:Object(S.jsx)(Y,{})}),Object(S.jsx)(j.b,{exact:!0,path:"/mybooks/update/:book_id",children:Object(S.jsx)(le,{update:function(e,t){return C.apply(this,arguments)}})}),Object(S.jsx)(j.b,{exact:!0,path:"/mybooks/:status",children:Object(S.jsx)(ce,{remove:function(e){return M.apply(this,arguments)}})}),Object(S.jsx)(j.b,{exact:!0,path:"/books/:id",children:Object(S.jsx)(ie,{})}),Object(S.jsx)(j.b,{children:Object(S.jsx)("p",{children:"Hmmm. I can't seem to find what you want."})})]})})]})})}):Object(S.jsx)("h3",{children:"Loading"})},je=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,365)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))};c.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(de,{})}),document.getElementById("root")),je()}},[[345,1,2]]]);
//# sourceMappingURL=main.29e732d1.chunk.js.map